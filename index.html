<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriSmart Ultimate - Intelligent Farming Ecosystem</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <section id="splash-screen">
        <div class="animated-bg">
            <div class="icon-float i1"><i class="fas fa-leaf"></i></div>
            <div class="icon-float i2"><i class="fas fa-cloud-showers-heavy"></i></div>
            <div class="icon-float i3"><i class="fas fa-seedling"></i></div>
            <div class="icon-float i4"><i class="fas fa-tractor"></i></div>
        </div>

        <div class="splash-content">
            <div class="logo-container">
                <i class="fas fa-plant-wilt logo-anim"></i>
            </div>
            <h1 class="title-anim">AgriSmart <span>Pro</span></h1>
            <p class="subtitle-anim">Cultivating Intelligence. Harvesting Success.</p>
            
            <button class="start-btn" onclick="enterDashboard()">
                Get Started <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </section>

    <div id="app-container" class="hidden">
        
        <nav class="glass-nav">
            <div class="brand">
                <i class="fas fa-leaf text-green"></i> &nbsp;AgriSmart
            </div>
            <div class="nav-actions">
                <select id="lang-selector" onchange="changeLanguage()">
                    <option value="en">English</option>
                    <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å</option>
                    <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä</option>
                </select>
                <button class="theme-toggle" onclick="toggleTheme()" title="Toggle Dark Mode">
                    <i class="fas fa-moon"></i>
                </button>
                <div class="profile-icon">
                    <img src="https://ui-avatars.com/api/?name=Farmer+Raju&background=2ecc71&color=fff&bold=true" alt="Profile">
                </div>
            </div>
        </nav>

        <div class="dashboard-grid">
            
            <aside class="sidebar">
                <button class="nav-btn active" onclick="switchTab('home')">
                    <i class="fas fa-home"></i> <span>Home</span>
                </button>
                <button class="nav-btn" onclick="switchTab('advisor')">
                    <i class="fas fa-robot"></i> <span>Crop Advisor</span>
                </button>
                <button class="nav-btn" onclick="switchTab('market')">
                    <i class="fas fa-store"></i> <span>Market (Buy/Sell)</span>
                </button>
                <button class="nav-btn" onclick="switchTab('soil')">
                    <i class="fas fa-flask"></i> <span>Soil Lab</span>
                </button>
                <button class="nav-btn" onclick="switchTab('schemes')">
                    <i class="fas fa-landmark"></i> <span>Govt Schemes</span>
                </button>
            </aside>

            <main class="content-area">

                <section id="home" class="panel active-panel">
                    <div class="welcome-banner glass-card">
                        <div>
                            <h2>üëã Namaste, Farmer!</h2>
                            <p>Here is your daily farm summary.</p>
                        </div>
                        <div class="weather-widget">
                            <i class="fas fa-cloud-sun"></i>
                            <div>
                                <span>29¬∞C</span>
                                <small>Hyderabad, India</small>
                            </div>
                        </div>
                    </div>

                    <div class="grid-2">
                        <div class="glass-card map-card">
                            <h3><i class="fas fa-map-location-dot"></i> Live Farm & Market Map</h3>
                            <div id="map"></div>
                        </div>
                        <div class="glass-card stats-card">
                            <h3><i class="fas fa-bell"></i> Farm Alerts</h3>
                            <ul class="alert-list">
                                <li class="alert-high"><i class="fas fa-exclamation-triangle"></i> Heavy rain alert (48hrs).</li>
                                <li class="alert-med"><i class="fas fa-info-circle"></i> Cotton prices up by ‚Çπ200/qt.</li>
                                <li class="alert-low"><i class="fas fa-check-circle"></i> Soil health report ready.</li>
                            </ul>
                        </div>
                    </div>
                </section>

                <section id="advisor" class="panel">
                    <div class="glass-card">
                        <h3>üå± Location-Based Crop Advisor</h3>
                        <p class="subtitle-text">Get scientifically backed suggestions based on your specific region.</p>
                        
                        <form id="crop-form" onsubmit="analyzeCrop(event)">
                            <div class="form-grid">
                                <div class="input-group">
                                    <label>Region / Location</label>
                                    <select id="location">
                                        <option value="south">South India (TS/AP/TN/KA)</option>
                                        <option value="north">North India (Punjab/UP)</option>
                                        <option value="coastal">Coastal Regions</option>
                                        <option value="deccan">Deccan Plateau (Maharashtra)</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label>Season</label>
                                    <select id="season">
                                        <option value="kharif">Kharif (Monsoon)</option>
                                        <option value="rabi">Rabi (Winter)</option>
                                        <option value="zaid">Zaid (Summer)</option>
                                    </select>
                                </div>
                                <div class="input-group">
                                    <label>Soil Type</label>
                                    <select id="soil">
                                        <option value="black">Black Soil (Regur)</option>
                                        <option value="red">Red Soil</option>
                                        <option value="loamy">Loamy Soil</option>
                                        <option value="clay">Clayey Soil</option>
                                    </select>
                                </div>
                            </div>
                            <button type="submit" class="action-btn">Analyze Best Crop</button>
                        </form>

                        <div id="advisor-result" class="result-box hidden">
                            <div class="result-header">
                                <i class="fas fa-award text-gold"></i>
                                <div>
                                    <h4>Top Pick: <span id="rec-name">Loading...</span></h4>
                                    <small>AI Confidence Score: 95%</small>
                                </div>
                            </div>
                            <p id="rec-reason" class="result-text">Analysis description will appear here.</p>
                        </div>
                    </div>
                </section>

                <section id="market" class="panel">
                    <div class="glass-card">
                        <div class="market-header-row">
                            <h3>üìä Marketplace</h3>
                            <button class="btn-sell" onclick="openSellModal()">
                                <i class="fas fa-plus"></i> Sell Your Crop
                            </button>
                        </div>
                        
                        <div class="chart-container">
                            <div class="bar-chart">
                                <div class="bar" style="height: 40%" onclick="updatePrice('Week 1: ‚Çπ4000')"><span>Week 1</span></div>
                                <div class="bar" style="height: 60%" onclick="updatePrice('Week 2: ‚Çπ4500')"><span>Week 2</span></div>
                                <div class="bar" style="height: 50%" onclick="updatePrice('Week 3: ‚Çπ4200')"><span>Week 3</span></div>
                                <div class="bar active" style="height: 85%" onclick="updatePrice('Today: ‚Çπ6200')"><span>Today</span></div>
                            </div>
                            <p id="price-display" style="text-align: center; margin-top: 15px; font-weight:bold;">
                                Market Trend: <strong>Rising üìà</strong>
                            </p>
                        </div>

                        <h4 class="mt-20">üõí Buy Crops (Live Listings)</h4>
                        <div class="market-list" id="market-listings">
                            <div class="market-item">
                                <img src="https://images.unsplash.com/photo-1586201375761-83865001e31c?auto=format&fit=crop&w=150" alt="Rice">
                                <div>
                                    <h5>Sona Masoori Rice</h5>
                                    <p class="text-green">‚Çπ 2,100 / qt</p>
                                    <small>Seller: Ravi Kumar</small>
                                </div>
                                <button class="btn-sm" onclick="buyItem('Rice')">Buy Now</button>
                            </div>
                            <div class="market-item">
                                <img src="https://images.unsplash.com/photo-1592924357228-91a4daadcfea?auto=format&fit=crop&w=150" alt="Tomato">
                                <div>
                                    <h5>Organic Tomato</h5>
                                    <p class="text-green">‚Çπ 1,200 / qt</p>
                                    <small>Seller: Anita Devi</small>
                                </div>
                                <button class="btn-sm" onclick="buyItem('Tomato')">Buy Now</button>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="soil" class="panel">
                    <div class="glass-card">
                        <h3>üß™ Digital Soil Lab</h3>
                        <p>Enter your soil test N-P-K values (mg/kg) to generate a detailed health card.</p>
                        
                        <div class="form-grid-3">
                            <div class="input-wrapper">
                                <label>Nitrogen (N)</label>
                                <input type="number" id="n-val" placeholder="e.g. 280">
                            </div>
                            <div class="input-wrapper">
                                <label>Phosphorus (P)</label>
                                <input type="number" id="p-val" placeholder="e.g. 15">
                            </div>
                            <div class="input-wrapper">
                                <label>Potassium (K)</label>
                                <input type="number" id="k-val" placeholder="e.g. 200">
                            </div>
                        </div>
                        
                        <button onclick="checkSoil()" class="action-btn secondary">Generate Health Card</button>
                        
                        <div id="soil-report" class="result-box hidden">
                            <h4>Soil Health Report</h4>
                            
                            <div class="health-meter-container">
                                <div class="health-bar-fill" id="health-bar"></div>
                            </div>
                            <p id="soil-status-text" style="text-align:center; font-weight:bold; margin-bottom:10px;">Analyzing...</p>
                            
                            <ul id="soil-tips" class="tips-list"></ul>
                        </div>
                    </div>
                </section>

                <section id="schemes" class="panel">
                    <div class="glass-card">
                        <h3>üèõÔ∏è Government Schemes</h3>
                        <div class="scheme-card">
                            <div class="scheme-icon"><i class="fas fa-hands-helping"></i></div>
                            <div>
                                <h4>PM-Kisan Samman Nidhi</h4>
                                <p>Financial benefit of ‚Çπ6,000 per year.</p>
                                <a href="#">Check Eligibility &rarr;</a>
                            </div>
                        </div>
                        <div class="scheme-card">
                            <div class="scheme-icon"><i class="fas fa-tractor"></i></div>
                            <div>
                                <h4>Sub-Mission on Agricultural Mechanization</h4>
                                <p>Subsidy on purchasing tractors and equipment.</p>
                                <a href="#">Apply Now &rarr;</a>
                            </div>
                        </div>
                    </div>
                </section>

            </main>
        </div>

        <div class="chatbot-wrapper">
            <div id="chat-window" class="chat-window">
                <div class="chat-header">
                    <div class="bot-info">
                        <div class="bot-avatar"><i class="fas fa-robot"></i></div>
                        <div><h5>AgriBot AI</h5><small>‚óè Online</small></div>
                    </div>
                    <button class="close-chat" onclick="toggleChat()"><i class="fas fa-times"></i></button>
                </div>
                <div id="chat-body" class="chat-body">
                    <div class="msg bot"><p>Namaste! Ask me about buying/selling crops, soil health, or weather.</p></div>
                </div>
                <div class="chat-input-area">
                    <input type="text" id="user-input" placeholder="Type here..." onkeypress="handleEnter(event)">
                    <button onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
            <button class="chat-trigger" onclick="toggleChat()"><i class="fas fa-comment-dots"></i></button>
        </div>

        <div id="sell-modal" class="modal hidden">
            <div class="modal-content glass-card">
                <h3>üí∞ Sell Your Crop</h3>
                <input type="text" id="sell-name" placeholder="Crop Name (e.g., Wheat)">
                <input type="text" id="sell-price" placeholder="Price per Quintal (e.g., ‚Çπ2000)">
                <input type="text" id="sell-seller" placeholder="Your Name">
                <div class="modal-actions">
                    <button class="btn-cancel" onclick="closeSellModal()">Cancel</button>
                    <button class="btn-confirm" onclick="confirmSell()">List Item</button>
                </div>
            </div>
        </div>

    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="script.js"></script>
</body>
</html>