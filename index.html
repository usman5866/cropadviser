<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriSmart | Crystal Edition</title>
    
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800&family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <section id="splash-screen">
        <div class="video-overlay"></div>
        <div class="splash-content">
            <div class="logo-glow">
                <i class="fas fa-seedling"></i>
            </div>
            <h1 class="mega-title">Agri<span>Smart</span></h1>
            <p class="tagline">Future Farming. Redefined.</p>
            <button class="btn-neon" onclick="enterDashboard()">
                LAUNCH SYSTEM <i class="fas fa-bolt"></i>
            </button>
        </div>
    </section>

    <div id="app-container" class="hidden">
        
        <nav class="glass-nav">
            <div class="brand">
                <i class="fas fa-leaf text-neon"></i> AgriSmart
            </div>
            <div class="nav-right">
                <button class="theme-btn" onclick="toggleTheme()">
                    <i id="theme-icon" class="fas fa-sun"></i>
                </button>
                <select id="lang-selector" class="glass-select" onchange="changeLanguage()">
                    <option value="en">ENG</option>
                    <option value="te">TEL</option>
                    <option value="hi">HIN</option>
                </select>
                <div class="profile-badge" onclick="openModal('login-modal')">
                    <img src="https://ui-avatars.com/api/?name=Raju&background=00e676&color=000" alt="Profile">
                    <span>Login</span>
                </div>
            </div>
        </nav>

        <div class="layout-grid">
            
            <aside class="glass-sidebar">
                <button class="nav-item active" onclick="switchTab('home')">
                    <i class="fas fa-home"></i> <span>Dashboard</span>
                </button>
                <button class="nav-item" onclick="switchTab('advisor')">
                    <i class="fas fa-robot"></i> <span>AI Advisor</span>
                </button>
                <button class="nav-item" onclick="switchTab('market')">
                    <i class="fas fa-chart-line"></i> <span>Market</span>
                </button>
                <button class="nav-item" onclick="switchTab('soil')">
                    <i class="fas fa-flask"></i> <span>Soil Lab</span>
                </button>
                <button class="nav-item" onclick="switchTab('schemes')">
                    <i class="fas fa-landmark"></i> <span>Schemes</span>
                </button>
            </aside>

            <main class="content-wrapper">

                <section id="home" class="panel active-panel">
                    <div class="tilt-card hero-card">
                        <div class="hero-text">
                            <h2 id="welcome-text">Hello, Farmer! üåæ</h2>
                            <p>System Status: <span class="text-neon">Online</span></p>
                        </div>
                        <div class="weather-box">
                            <i class="fas fa-cloud-sun"></i>
                            <div>
                                <span>28¬∞C</span>
                                <small>Hyderabad</small>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-widgets">
                        <div class="tilt-card widget-card map-wrapper">
                            <h3><i class="fas fa-map-marked-alt text-neon"></i> Live Map</h3>
                            <div id="map"></div>
                        </div>
                        <div class="tilt-card widget-card alerts-wrapper">
                            <h3><i class="fas fa-bell text-neon"></i> Critical Alerts</h3>
                            <div class="alert-item high">
                                <i class="fas fa-exclamation-triangle"></i>
                                <div><strong>Storm Alert</strong><br>Heavy rain (24h)</div>
                            </div>
                            <div class="alert-item med">
                                <i class="fas fa-arrow-trend-up"></i>
                                <div><strong>Cotton Price</strong><br>Up by ‚Çπ200 today</div>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="advisor" class="panel">
                    <div class="tilt-card glass-panel">
                        <h3>üå± Smart Crop Intelligence</h3>
                        <p class="sub-text">AI-driven recommendations based on parameters.</p>
                        
                        <form id="crop-form" onsubmit="analyzeCrop(event)">
                            <div class="input-grid">
                                <div class="field">
                                    <label>Region</label>
                                    <select id="location">
                                        <option value="south">South India</option>
                                        <option value="north">North India</option>
                                        <option value="coastal">Coastal</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Season</label>
                                    <select id="season">
                                        <option value="kharif">Kharif</option>
                                        <option value="rabi">Rabi</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Soil Type</label>
                                    <select id="soil">
                                        <option value="black">Black Soil</option>
                                        <option value="red">Red Soil</option>
                                        <option value="loamy">Loamy Soil</option>
                                    </select>
                                </div>
                                <div class="field">
                                    <label>Rainfall</label>
                                    <select id="rainfall">
                                        <option value="high">High (>1000mm)</option>
                                        <option value="low">Low (<500mm)</option>
                                    </select>
                                </div>
                            </div>
                            <button class="btn-neon full-width">Analyze Crop</button>
                        </form>

                        <div id="advisor-result" class="result-card hidden">
                            <div class="res-icon"><i class="fas fa-check-circle"></i></div>
                            <div>
                                <h4 id="rec-name">Analyzing...</h4>
                                <p id="rec-reason">Please wait...</p>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="market" class="panel">
                    <div class="tilt-card glass-panel">
                        <div class="flex-head">
                            <h3>üìä Market Trends</h3>
                            <button class="btn-outline" onclick="openModal('sell-modal')">+ Sell Crop</button>
                        </div>
                        
                        <div class="chart-box">
                            <div class="bar-group">
                                <div class="bar" style="height: 40%" onclick="updatePrice('‚Çπ4000')"><span>W1</span></div>
                                <div class="bar" style="height: 60%" onclick="updatePrice('‚Çπ4500')"><span>W2</span></div>
                                <div class="bar" style="height: 50%" onclick="updatePrice('‚Çπ4200')"><span>W3</span></div>
                                <div class="bar active" style="height: 85%" onclick="updatePrice('‚Çπ6200')"><span>Today</span></div>
                            </div>
                            <p id="price-display">Current Price: <strong>‚Çπ6200/qt</strong></p>
                        </div>

                        <h4 class="section-head">Live Listings</h4>
                        <div class="listing-grid" id="market-listings">
                            </div>
                    </div>
                </section>

                <section id="soil" class="panel">
                    <div class="tilt-card glass-panel">
                        <h3>üß™ Soil Health Lab</h3>
                        <div class="input-grid three-col">
                            <div class="field"><label>Nitrogen (N)</label><input type="number" id="n-val" placeholder="mg/kg"></div>
                            <div class="field"><label>Phosphorus (P)</label><input type="number" id="p-val" placeholder="mg/kg"></div>
                            <div class="field"><label>Potassium (K)</label><input type="number" id="k-val" placeholder="mg/kg"></div>
                        </div>
                        <button class="btn-neon full-width" onclick="checkSoil()">Check Health</button>
                        
                        <div id="soil-report" class="result-card hidden">
                            <h4>Health Analysis</h4>
                            <div class="meter-track"><div id="health-bar" class="meter-fill"></div></div>
                            <p id="soil-status-text">Analyzing...</p>
                            <ul id="soil-tips"></ul>
                        </div>
                    </div>
                </section>

                <section id="schemes" class="panel">
                    <div class="tilt-card glass-panel">
                        <h3>üèõÔ∏è Government Support</h3>
                        <div class="scheme-item">
                            <div class="sch-icon"><i class="fas fa-hand-holding-dollar"></i></div>
                            <div class="sch-info">
                                <h4>PM-Kisan Nidhi</h4>
                                <p>‚Çπ6000 annual support for farmers.</p>
                            </div>
                            <button class="btn-sm">Apply</button>
                        </div>
                        <div class="scheme-item">
                            <div class="sch-icon"><i class="fas fa-tractor"></i></div>
                            <div class="sch-info">
                                <h4>Rythu Bandhu</h4>
                                <p>Investment support for agriculture.</p>
                            </div>
                            <button class="btn-sm">View</button>
                        </div>
                    </div>
                </section>

            </main>
        </div>

        <div class="chat-container">
            <button class="chat-fab" onclick="toggleChat()"><i class="fas fa-comment-dots"></i></button>
            <div id="chat-window" class="chat-interface">
                <div class="chat-top">
                    <span>AgriBot AI</span>
                    <button onclick="toggleChat()"><i class="fas fa-times"></i></button>
                </div>
                <div id="chat-body" class="chat-content">
                    <div class="msg bot">Hello! Ask me about prices, weather, or crops.</div>
                </div>
                <div class="chat-input">
                    <input type="text" id="user-input" placeholder="Type here..." onkeypress="handleEnter(event)">
                    <button onclick="sendMessage()">‚û§</button>
                </div>
            </div>
        </div>

        <div id="sell-modal" class="modal-overlay hidden">
            <div class="modal-box">
                <h3>Sell Crop</h3>
                <input type="text" id="sell-name" placeholder="Crop Name">
                <input type="text" id="sell-price" placeholder="Price (‚Çπ)">
                <input type="text" id="sell-seller" placeholder="Seller Name">
                <div class="modal-btns">
                    <button class="btn-outline" onclick="closeModal('sell-modal')">Cancel</button>
                    <button class="btn-neon" onclick="confirmSell()">List It</button>
                </div>
            </div>
        </div>
        
        <div id="login-modal" class="modal-overlay hidden">
            <div class="modal-box">
                <h3>Login</h3>
                <input type="text" placeholder="User ID">
                <input type="password" placeholder="Password">
                <div class="modal-btns">
                    <button class="btn-outline" onclick="closeModal('login-modal')">Cancel</button>
                    <button class="btn-neon" onclick="closeModal('login-modal'); alert('Logged In!')">Enter</button>
                </div>
            </div>
        </div>

    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="script.js"></script>
</body>
</html>