/* =========================================
   1. GLOBAL VARIABLES
   ========================================= */
:root {
    --primary: #27ae60;
    --secondary: #2ecc71;
    --accent: #f1c40f;
    --dark: #2c3e50;
    --glass-bg: rgba(255, 255, 255, 0.9);
    --glass-border: 1px solid rgba(255, 255, 255, 0.5);
    --shadow: 0 8px 32px rgba(0,0,0,0.1);
    --text-main: #333;
    --font-main: 'Poppins', sans-serif;
}

body.dark-mode {
    --glass-bg: rgba(20, 30, 40, 0.95);
    --text-main: #ecf0f1;
    background: #1a1a2e;
}

* { box-sizing: border-box; margin: 0; padding: 0; transition: all 0.3s ease; }
body { font-family: var(--font-main); background: linear-gradient(135deg, #e0f7fa 0%, #e8f5e9 100%); color: var(--text-main); height: 100vh; overflow: hidden; }

/* =========================================
   2. SPLASH SCREEN
   ========================================= */
#splash-screen {
    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
    background: linear-gradient(45deg, #11998e, #38ef7d);
    z-index: 9999; display: flex; flex-direction: column; justify-content: center; align-items: center;
}
.animated-bg { position: absolute; width: 100%; height: 100%; pointer-events: none; }
.icon-float { position: absolute; font-size: 4rem; color: rgba(255,255,255,0.2); animation: float 10s infinite linear; }
.i1 { top: 10%; left: 10%; } .i2 { bottom: 20%; left: 20%; } .i3 { top: 30%; right: 20%; } .i4 { bottom: 10%; right: 10%; }
@keyframes float { 0% { transform: translateY(0) rotate(0deg); } 50% { transform: translateY(-30px) rotate(20deg); } 100% { transform: translateY(0) rotate(0deg); } }

.splash-content { z-index: 10; text-align: center; color: white; }
.logo-container { font-size: 5rem; margin-bottom: 20px; animation: popIn 1s forwards; }
.title-anim { font-size: 4rem; font-weight: 700; opacity: 0; animation: slideUp 1s 0.5s forwards; }
.start-btn { padding: 15px 40px; font-size: 1.2rem; border-radius: 50px; border: none; background: white; color: var(--primary); font-weight: bold; cursor: pointer; opacity: 0; animation: fadeIn 1s 1.5s forwards; display: inline-flex; align-items: center; gap: 10px; }
.start-btn:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.2); }

@keyframes popIn { 0% { transform: scale(0); } 80% { transform: scale(1.1); } 100% { transform: scale(1); } }
@keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
.slide-out-up { animation: exitUp 0.8s forwards; }
@keyframes exitUp { to { transform: translateY(-100%); opacity: 1; } }

/* =========================================
   3. DASHBOARD LAYOUT
   ========================================= */
#app-container { height: 100vh; display: flex; flex-direction: column; opacity: 0; pointer-events: none; transition: opacity 1s; }
#app-container.visible { opacity: 1; pointer-events: all; }

.glass-nav { display: flex; justify-content: space-between; align-items: center; padding: 15px 30px; background: var(--glass-bg); backdrop-filter: blur(10px); z-index: 100; border-bottom: var(--glass-border); }
.brand { font-size: 1.5rem; font-weight: bold; color: var(--primary); }
.nav-actions { display: flex; align-items: center; gap: 15px; }
.profile-icon img { width: 40px; height: 40px; border-radius: 50%; border: 2px solid var(--primary); }

.dashboard-grid { display: flex; flex: 1; overflow: hidden; }
.sidebar { width: 250px; background: var(--glass-bg); padding: 20px; display: flex; flex-direction: column; gap: 10px; border-right: var(--glass-border); }
.nav-btn { padding: 15px; text-align: left; background: transparent; border: none; color: var(--text-main); cursor: pointer; border-radius: 12px; display: flex; align-items: center; gap: 15px; font-weight: 500; }
.nav-btn:hover, .nav-btn.active { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(39, 174, 96, 0.4); }

.content-area { flex: 1; padding: 30px; overflow-y: auto; }
.panel { display: none; animation: fadeIn 0.5s; }
.panel.active-panel { display: block; }

/* =========================================
   4. COMPONENTS
   ========================================= */
.glass-card { background: var(--glass-bg); border-radius: 20px; padding: 25px; margin-bottom: 25px; box-shadow: var(--shadow); border: var(--glass-border); }
.welcome-banner { background: linear-gradient(135deg, var(--primary), #1e8449); color: white; display: flex; justify-content: space-between; align-items: center; }
.weather-widget { text-align: right; display: flex; align-items: center; gap: 15px; }
.weather-widget span { font-size: 2rem; font-weight: 700; }

.grid-2 { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
#map { height: 350px; border-radius: 15px; width: 100%; border: 2px solid white; }

.alert-list li { padding: 12px; margin: 8px 0; border-radius: 10px; display: flex; align-items: center; gap: 10px; }
.alert-high { background: #fadbd8; color: #c0392b; border-left: 4px solid #c0392b; }
.alert-med { background: #fdebd0; color: #d35400; border-left: 4px solid #d35400; }
.alert-low { background: #d5f5e3; color: #27ae60; border-left: 4px solid #27ae60; }

.form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
.form-grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 15px; margin-bottom: 20px; }
.input-wrapper label { display: block; margin-bottom: 5px; font-size: 0.9rem; font-weight: 600; }
input, select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #ccc; background: rgba(255,255,255,0.9); }
.action-btn { width: 100%; padding: 15px; background: var(--primary); color: white; border: none; border-radius: 12px; font-weight: bold; cursor: pointer; }
.action-btn.secondary { background: var(--dark); }

.result-box { margin-top: 20px; padding: 20px; background: rgba(46, 204, 113, 0.15); border-left: 5px solid var(--primary); border-radius: 8px; }
.hidden { display: none; }
.text-gold { color: var(--accent); font-size: 1.5rem; margin-right: 10px; }

/* Market Chart */
.chart-container { background: #fff; padding: 20px; border-radius: 15px; }
.bar-chart { display: flex; align-items: flex-end; justify-content: space-around; height: 180px; border-bottom: 2px solid #eee; }
.bar { width: 40px; background: #bdc3c7; border-radius: 8px 8px 0 0; position: relative; cursor: pointer; transition: height 1s; }
.bar:hover, .bar.active { background: var(--primary); }
.bar span { position: absolute; bottom: -30px; left: 50%; transform: translateX(-50%); font-size: 0.8rem; white-space: nowrap; }

/* Soil Lab Health Meter */
.health-meter-container { height: 15px; background: #ddd; border-radius: 10px; overflow: hidden; margin: 15px 0; }
.health-bar-fill { height: 100%; width: 0%; background: linear-gradient(90deg, #ff4757, #f1c40f, #2ecc71); transition: width 1.5s ease-in-out; }
.tips-list li { margin-bottom: 8px; list-style: none; }

/* Chatbot */
.chatbot-wrapper { position: fixed; bottom: 30px; right: 30px; z-index: 2000; }
.chat-trigger { width: 60px; height: 60px; border-radius: 50%; background: var(--primary); color: white; border: none; font-size: 24px; box-shadow: 0 5px 20px rgba(0,0,0,0.3); cursor: pointer; transition: transform 0.2s; }
.chat-trigger:hover { transform: scale(1.1); }
.chat-window { position: absolute; bottom: 80px; right: 0; width: 350px; height: 500px; background: white; border-radius: 20px; box-shadow: 0 15px 50px rgba(0,0,0,0.2); display: flex; flex-direction: column; transform: translateY(20px) scale(0.9); opacity: 0; pointer-events: none; transition: all 0.3s; }
.chat-window.active { transform: translateY(0) scale(1); opacity: 1; pointer-events: all; }
.chat-header { background: var(--primary); color: white; padding: 15px; display: flex; justify-content: space-between; align-items: center; }
.chat-body { flex: 1; padding: 15px; background: #f4f6f8; overflow-y: auto; display: flex; flex-direction: column; gap: 10px; }
.msg { padding: 10px 15px; border-radius: 15px; max-width: 80%; font-size: 0.9rem; }
.msg.bot { background: white; align-self: flex-start; }
.msg.user { background: var(--primary); color: white; align-self: flex-end; }
.chat-input-area { padding: 15px; border-top: 1px solid #eee; display: flex; gap: 10px; }
.chat-input-area input { flex: 1; border-radius: 20px; padding: 10px 15px; border: none; background: #f1f2f6; outline: none; }
.chat-input-area button { background: var(--primary); color: white; width: 40px; height: 40px; border-radius: 50%; border: none; cursor: pointer; }

/* Mobile */
@media (max-width: 768px) {
    .dashboard-grid { flex-direction: column; }
    .sidebar { width: 100%; flex-direction: row; overflow-x: auto; padding: 15px; border-bottom: var(--glass-border); flex-shrink: 0; }
    .nav-btn span { display: none; }
    .nav-btn { justify-content: center; padding: 12px; font-size: 1.2rem; }
    .grid-2, .form-grid, .form-grid-3 { grid-template-columns: 1fr; }
    .chat-window { width: 300px; height: 400px; }
}